syntax = "proto3";

option go_package = "github.com/fluffy-bunny/fluffycore-rage-identity/proto/external/models;models";

package proto.external.models;

import "google/protobuf/descriptor.proto";
import "google/protobuf/wrappers.proto";
import "proto/types/primitives.proto";
import "proto/types/filter.proto";
import "proto/types/phone_number.proto";
 
enum UserState {
    USER_STATE_UNSPECIFIED = 0;
    USER_STATE_ACTIVE = 1;
    USER_STATE_DISABLED = 2;
    USER_STATE_DELETED = 3;
    USER_STATE_PENDING = 4;
}

message UserStateFilterExpression {
    option (proto.types.filter_expression) = true;

    UserState eq          = 1 [(proto.types.op) = OP_EQ];
    repeated UserState in = 2 [(proto.types.op) = OP_IN];
}

message UserStateValue {
    UserState vale = 1;
}

message Address {
    string street = 1;
    string city = 2;
    string state = 3;
    string postal_code = 4;
    string country = 5;
}
message AddressUpdate {
    google.protobuf.StringValue street = 1;
    google.protobuf.StringValue city = 2;
    google.protobuf.StringValue state = 3;
    google.protobuf.StringValue postal_code = 4;
    google.protobuf.StringValue country = 5;
}
message Profile{
    string given_name = 1;
    string family_name = 2;
    repeated proto.types.PhoneNumberDTO phone_numbers = 3;
    Address address = 4;
}
message ProfileUpdate{
    google.protobuf.StringValue given_name = 1;
    google.protobuf.StringValue family_name = 2;
    repeated proto.types.PhoneNumberDTOUpdate phone_numbers = 3;
    AddressUpdate address = 4;
}
message User {
    string                  id = 1;
    map<string, string>     metadata = 2;
    UserState               state = 3;
    Profile                 profile = 4;
}

message UserUpdate {
    string                          id = 1;
    proto.types.StringMapUpdate     metadata = 2;
    UserStateValue                  state = 3;
    ProfileUpdate                   profile = 4;
}

